<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:ital,wght@0,100..900;1,100..900&family=Roboto+Mono:ital,wght@0,100..700;1,100..700&family=Roboto:ital,wght@0,100..900;1,100..900&family=Rubik:ital,wght@0,300..900;1,300..900&display=swap">
		<link rel="stylesheet" href="./styles/main.css">
		<link rel="stylesheet" href="./styles/finance.css">
		<script type="text/javascript" src="./scripts/templates.js"></script>
		<script type="text/javascript" src="./styles/color-palettes.js" defer></script>

		<title>Financial Reports</title>
		<link rel="icon" type="image/x-icon" href="/assets/icons/logo/eb-logo-2025--mono.svg">
	</head>

	<body>
		<header></header>
		<main>
			<h1>FINANCIAL REPORTS</h1>
			<section>
				<p>These financial reports are disclosed to provide clarity into financial motives and give insight into the cost of operations. If the opportunity arises to pay other people to work on the show, this transparency should help maintain fair and honest pay.</p>
			</section>

			<section>
				<label for="report-id">Select a report:</label>
				<select name="report-id" id="report-id" onchange="generateReport()">
					<option value="default" selected>---</option>
					<optgroup label="2025">
						<option value="2025-Q1">2025 Q1 (JAN / FEB / MAR)</option>
					</optgroup>
					<optgroup label="2024">
						<option value="2024-Q4">2024 Q4 (OCT / NOV / DEC)</option>
						<option value="2024-Q3">2024 Q3 (JUL / AUG / SEP)</option>
						<option value="2024-Q2">2024 Q2 (APR / MAY / JUN)</option>
						<option value="2024-Q1" disabled>2024 Q1 (JAN / FEB / MAR)</option>
					</optgroup>
					<optgroup label="2023">
						<option value="2023-Q4" disabled>2023 Q4 (OCT / NOV / DEC)</option>
						<option value="2023-Q3" disabled>2023 Q3 (JUL / AUG / SEP)</option>
						<option value="2023-Q2" disabled>2023 Q2 (APR / MAY / JUN)</option>
						<option value="2023-Q1" disabled>2023 Q1 (JAN / FEB / MAR)</option>
					</optgroup>
					<optgroup label="2022">
						<option value="2022-Q4" disabled>2022 Q4 (OCT / NOV / DEC)</option>
						<option value="2022-Q3" disabled>2022 Q3 (JUL / AUG / SEP)</option>
						<option value="2022-Q2" disabled>2022 Q2 (APR / MAY / JUN)</option>
						<option value="2022-Q1" disabled>2022 Q1 (JAN / FEB / MAR)</option>
					</optgroup>
					<optgroup label="2021">
						<option value="2021-Q4" disabled>2021 Q4 (OCT / NOV / DEC)</option>
						<option value="2021-Q3" disabled>2021 Q3 (JUL / AUG / SEP)</option>
						<option value="2021-Q2" disabled>2021 Q2 (APR / MAY / JUN)</option>
						<option value="2021-Q1" disabled>2021 Q1 (JAN / FEB / MAR)</option>
					</optgroup>
				</select>
				<reports>
				</reports>
			</section>
		</main>
		<footer></footer>
	</body>
	<script>
		let path = window.location.pathname;
		buildHeader(path);
		buildFooter(path);
		const reportData = [
			{id: "2025-Q1", caption: "2025 Q1 Finances",
			income: [
				["Patreon","$246.54"],
				["Bandcamp","$9.40"]],
			expenses: [
				["community infrastructure","-$28.92"],
				["admin services","-$59.25"],
				["creative tools and assets, software","-$59.09"],
				["labor: Brandt Hughes","-$108.68","*"]],
			total: "$0"},
			{id: "2024-Q4", caption: "2024 Q4 Finances",
			income: [
				["Patreon","$248.99"],
				["Bandcamp","$25.06"]],
			expenses: [
				["community infrastructure","-$28.92"],
				["admin services","-$23.37"],
				["creative tools and assets, software","-$76.75"],
				["Tenere video supplies","-$9.73"],
				["website","-$216.67"],
				["labor: Brandt Hughes","-$0","*"]],
			total: "-$81.39"},
			{id: "2024-Q3", caption: "2024 Q3 Finances",
			income: [
				["Patreon","$236.99"]],
			expenses: [
				["community infrastructure","-$28.92"],
				["admin services","-$26.89"],
				["creative tools and assets, software","-$169.47"],
				["equipment","-$37.86"],
				["labor: Brandt Hughes","-$0","*"]],
			total: "-$26.15"},
			{id: "2024-Q2", caption: "2024 Q2 Finances",
			income: [
				["Patreon","$262.89"],
				["Bandcamp","$15.71"]],
			expenses: [
				["community infrastructure","-$28.67"],
				["admin services","-$23.15"],
				["creative tools and assets, software","-$164.89"],
				["labor: Brandt Hughes","-$61.89","*"]],
			total: "$0"}
		];
		let insufficientFunds = false;

		function generateReport() {
			insufficientFunds = false;
			let id = document.getElementById("report-id").value;
			let indx = reportData
				.map(function (element) {return element.id;})
				.indexOf(id);
			const container = document.getElementsByTagName("reports")[0];
			if (container.children.length > 0) {
				container.removeChild(container.firstElementChild)
			}

			let report = document.createElement("report");
			let table = document.createElement("table");
			let caption = document.createElement("caption");
				caption.innerHTML = reportData[indx].caption;

			table.append(caption);
			table.append(createTableHeaders());
			table.append(createTableBody(indx));
			table.append(createTableFoot(reportData[indx].total));

			report.append(table);
			if (insufficientFunds == true) { report.append(createSub()) }
			container.append(report);
		}
		function createTableHeaders() {
			let output = document.createElement("thead");
			let tr = document.createElement("tr");
			let th1 = document.createElement("th");
				th1.innerHTML = "Category";
			let th2 = document.createElement("th");
				th2.innerHTML = "Value";
			tr.append(th1, th2);
			output.append(tr);

			return output;
		}
		function createTableBody(indx) {
			let output = document.createElement("tbody");
			if (reportData[indx].income) {
				createTableSection(output, indx, "income")
			}
			if (reportData[indx].expenses) {
				createTableSection(output, indx, "expenses")
			}

			return output;
		}
		function createTableSection(output, indx, type) {
			let trCat = document.createElement("tr");
			let tdCat = document.createElement("td");
				tdCat.setAttribute("colspan",2);
				tdCat.innerHTML = "<strong>" + type + "</strong>";
			trCat.append(tdCat);
			output.append(trCat);

			reportData[indx][type].forEach((e, indx) => {
				let tr = document.createElement("tr");
				let td1 = document.createElement("td");
					td1.innerHTML = e[0];
				let td2 = document.createElement("td");
					td2.innerHTML = e[1];
				if (e[2]) {
					td2.innerHTML = e[1] + e[2];
					insufficientFunds = true;
				}
				tr.append(td1, td2);
				output.append(tr);
			});
		}
		function createTableFoot(total) {
			let output = document.createElement("tfoot");
			let trSpacer = document.createElement("tr");
			let tdSpacer = document.createElement("td");
				tdSpacer.setAttribute("colspan",2);
			trSpacer.append(tdSpacer);
			let trTotal = document.createElement("tr");
			let tdTotal1 = document.createElement("td");
				tdTotal1.innerHTML = "TOTAL";
			let tdTotal2 = document.createElement("td");
				tdTotal2.innerHTML = total;
			trTotal.append(tdTotal1, tdTotal2);
			output.append(trSpacer, trTotal);

			return output;
		}
		function createSub() {
			let output = document.createElement("sub");
				output.innerHTML = "*insufficient yield to pay full amount";

			return output;
		}
	</script>
</html>